<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EasyATM — Confirm PayNow</title>

  <!-- ATM homepage styling -->
  <link rel="stylesheet" href="styles/home.css">

  <!-- App form style -->
  <link rel="stylesheet" href="styles.css">

  <!-- Impersonation Guard Styles -->
  <link rel="stylesheet" href="impersonation-guard.css">

  <!-- Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="atm-body">

<main class="atm-shell">
  <section class="atm-card">
    <div class="atm-layout">

      <!-- =============================== -->
      <!-- LEFT SIDE: CONFIRM DETAILS      -->
      <!-- =============================== -->
      <div class="atm-left">

        <!-- Header -->
        <div class="atm-header">
          <div class="header-content">
            <h1 class="atm-title">Confirm PayNow</h1>

            <button onclick="location.href='paynow.html'" class="logout-btn">
              <i data-lucide="arrow-left"></i> Back
            </button>
          </div>
        </div>

        <!-- Review Details Box -->
        <div class="card" style="margin-top:20px;">
          <p class="summary">
            <strong>Final check:</strong> Ensure the recipient is someone you know.
          </p>

          <div class="card">
            <p><strong>Method:</strong> <span id="confirm-method">(loading)</span></p>
            <p><strong>Recipient:</strong> <span id="confirm-recipient">(loading)</span></p>
            <p><strong>Amount (SGD):</strong> <span id="confirm-amount">(loading)</span></p>
          </div>

          <div class="actions">
            <a href="paynow.html" class="btn btn-ghost">Back</a>
            <button id="send-paynow" class="btn btn-primary btn-lg">Confirm & Send</button>
          </div>
        </div>
      </div>

      <!-- =============================== -->
      <!-- RIGHT SIDE: CHATBOT             -->
      <!-- =============================== -->
      <aside class="atm-right">

        <div class="topbar">

          <div class="top-right-controls">

            <select class="lang-select">
              <option>English</option>
            </select>

            <div class="divider"></div>

            <!-- Compact Safe Mode -->
            <div class="safe safe-compact" role="group" aria-label="Safe Mode">
              <input id="safemode" type="checkbox" checked />
              <label for="safemode">Safe Mode</label>
            </div>

            <div class="divider"></div>

            <button onclick="location.href='home.html'" class="exit-btn hover-tts">
              <i data-lucide="log-out" class="icon"></i>
              <span>Exit</span>
            </button>

          </div>
        </div>

        <!-- Chat module -->
        <div class="chat-shell">
          <div id="chatlog" class="chat-log"></div>

          <div class="chat-input-row">
            <input id="userInput" class="chat-input" placeholder="How can I assist?" />
            <button id="sendBtn" class="chat-send">
              <i data-lucide="send" class="icon-xs"></i>
            </button>
          </div>

          <div class="chat-footer">
            <div class="chat-tip">Tip: “What is PayNow?”</div>
          </div>
        </div>

      </aside>

    </div>
  </section>
</main>

<!-- Icons -->
<script> lucide.createIcons(); </script>

<!-- Safe mode, TTS, chatbot -->
<script src="scripts/home.js"></script>

<!-- Your original logic -->
<script src="app.js"></script>
<script src="fraud-detection-system.js"></script>
<script src="impersonation-guard.js"></script>

<script>
// Continue monitoring on confirmation page if it was enabled
document.addEventListener('DOMContentLoaded', function() {
  if (window.ImpersonationGuard) {
    const status = window.ImpersonationGuard.getStatus();
    // Auto-start if was previously enabled (user came from paynow.html with it on)
    // For now, just let user manually enable if needed on previous page
  }
});
</script>

</body>
</html>
